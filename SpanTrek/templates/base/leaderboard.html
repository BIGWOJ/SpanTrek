{%extends 'base/base.html'%} {% block styles %} {%load static%} 
{{ block.super }}
<link
    rel="stylesheet"
    type="text/css"
    href="{% static 'styles/base/leaderboard.css' %}"
/>
<script src="{% static 'scripts/base/leaderboard.js' %}"></script>
{% endblock styles %} {%block content%}

<div class="leaderboard-container">
    <div class="leaderboard-header">
        <h1 class="leaderboard-title">Leaderboard</h1>
        <p class="leaderboard-subtitle">
            Compete with Spanish learners around the world
        </p>
        <div class="users-count-info">
            <span class="users-count-number">{{ all_users_count }}</span>
            <span class="users-count-text">Spanish learners competing</span>
        </div>
    </div>

    <div class="leaderboard-tabs">
        <a href="{% url 'leaderboard' 'user_position' %}"
            ><button
                class="tab-button {% if view_type == 'user_position' %}active{% endif %}"
                id="user_position-tab"
            >
                Your position
            </button></a
        >
        <a href="{% url 'leaderboard' 'top' %}"
            ><button
                class="tab-button {% if view_type == 'top' %}active{% endif %}"
                id="top10-tab"
            >
                Top 10
            </button></a
        >
    </div>

    <div class="leaderboard-content">
        <div class="surrounding-users-section">
            <div class="users-list">
                {% if leaderboard_users %} {% for user in leaderboard_users %}
                <a href="{% url 'user_page' user.id %}">
                    <div
                        class="user-row {% if user == request.user %}current-user{% endif %}{% if user.display_rank <= 3 %} podium-position rank-{{ user.display_rank }}{% endif %}"
                    >
                        <div class="rank">
                            {% if user.display_rank <= 3 %}
                            <div class="trophy-rank">
                                {% if user.display_rank == 1 %}
                                <span class="trophy gold">ðŸ¥‡</span>
                                {% elif user.display_rank == 2 %}
                                <span class="trophy silver">ðŸ¥ˆ</span>
                                {% elif user.display_rank == 3 %}
                                <span class="trophy bronze">ðŸ¥‰</span>
                                {% endif %}
                            </div>
                            {% else %}
                            <span class="rank-number"
                                >#{{ user.display_rank }}</span
                            >
                            {% endif %}
                        </div>
                        <div class="user-avatar">
                            <img
                                src="{{ user.avatar.url }}"
                                alt="{{ user.username }}"
                                class="avatar-img"
                            />
                        </div>
                        <div class="user-info">
                            <div class="username">{{ user.username }}</div>
                            <div class="user-level">Level {{ user.level }}</div>
                        </div>
                        <div class="user-stats">
                            <div class="experience">
                                <span class="xp-number"
                                    >{{ user.experience }}</span
                                >
                                <span class="xp-label">XP</span>
                            </div>
                            <div class="streak">
                                <span class="streak-flame">ðŸ”¥</span>
                                <span class="streak-number"
                                    >{{ user.days_streak }}</span
                                >
                            </div>
                        </div>
                        {% if user == request.user %}
                        <div class="current-user-badge">YOU</div>
                        {% endif %}
                    </div>
                </a>
                {% endfor %} {% else %}
                <div class="no-users-section">
                    <div class="no-users-icon">ðŸŽ¯</div>
                    <h3 class="no-users-title">Start your spanish journey!</h3>
                    <p class="no-users-message">
                        Get your first experience points to appear on the
                        leaderboard.
                    </p>
                    <p class="no-users-subtitle">
                        Complete lessons and practice to earn XP and compete
                        with other learners!
                    </p>
                    <a
                        href="{% url 'lessons:world_map' %}"
                        class="start-learning-btn"
                    >
                        <span class="btn-icon">ðŸš€</span>
                        Start adventure now!
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{%endblock content%}
