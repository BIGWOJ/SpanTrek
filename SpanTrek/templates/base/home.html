{%extends 'base/base.html'%} {%load static%} {% block styles %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'styles/base/home.css' %}" />
<script src="{% static 'scripts/base/home.js' %}"></script>
{% endblock styles %} {%block content%}

<div class="hero-section">
    <div class="hero-content">
        <div class="welcome-card">
            <div class="streak-info">
                {% if user.days_streak != 0 %}
                <div class="streak-flame">ğŸ”¥</div>
                <span class="streak-count">{{ user.days_streak }}</span>
                <span class="streak-text">
                    {% if user.days_streak > 1 %} days streak {% else %} day
                    streak {% endif %}
                </span>
                {% else %}
                <span class="streak-count">Start your daily streak!</span>
                {% endif %}
            </div>
            <h1 class="welcome-title">Â¡Hola, {{ user.username }}!</h1>
        </div>
    </div>
</div>

<div class="main-content">
    <div class="progress-section">
        <div class="level-card">
            <div class="level-info">
                <h3>Current level</h3>
                <div class="level-badge">
                    <span class="level-number">{{user.level}}</span>
                    <span class="level-name">//level name//</span>
                </div>
            </div>
            <div class="xp-info">
                <span class="xp-text">{{user.experience}} XP</span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 65%"></div>
                </div>
                <span class="next-level">XXX levels to //next level name//</span>
            </div>
        </div>
    </div>

    <div class="main-course-section">
        <h2 class="section-title">Spanish Trek</h2>
        <div class="main-course-card">
            <a href="{% url 'lessons:world_map' %}" class="lesson-card-link">
                <div class="lesson-card current main-lesson">
                    <div class="lesson-icon active">ğŸ—ºï¸</div>
                    <h4>Main adventure</h4>
                    <div class="lesson-progress">
                        <div class="stars">â­â­â˜†</div>
                        <span class="completion">{{ user.adventure_progress }} / {{ all_lessons_count }}
                            completed</span>
                    </div>
                    <span class="continue-btn">Continue adventure</span>
                </div>
            </a>
        </div>
    </div>

    <div class="leaderboard-section">
        <h2 class="section-title">Leaderboard</h2>
        <div class="leaderboard-card">
            <a href="{% url 'leaderboard' 'user_position'%}" class="leaderboard-link">
                <div class="leaderboard-content">
                    <div class="leaderboard-icon">ğŸ†</div>
                    <div class="leaderboard-info">
                        <h3>Compete with others</h3>
                        <p>See how you rank among Spanish learners</p>
                        <div class="current-rank">
                            <span class="rank-text">Your current rank: </span>
                            <span class="rank-number">{% if request.user.levels.overall %}{{request.user.levels.overall}}{% else %}Unranked{% endif %}</span>
                        </div>
                    </div>
                    <div class="leaderboard-arrow">â†’</div>
                </div>
            </a>
        </div>
    </div>

    <div class="review-section">
        <h2 class="section-title">Review & practice</h2>
        <div class="lessons-grid">
            {% if user.words_learned|length > 0 or user.sentences_learned|length > 0 or user.audio_learned|length > 0 %}
            <a href="{% url 'practice:practice_intro' 'random' %}" class="lesson-card-link">
                <div class="lesson-card">
                    <div class="lesson-icon">ğŸ²</div>
                    <h4>Random</h4>
                </div>
            </a>
            {%else%}
            <div class="lesson-card locked">
                <div class="lesson-icon">ğŸ²</div>
                <h4>Random</h4>
                <p class="lock-text">Start SpanTrek adventure to unlock practice</p>
            </div>
            {% endif %}
            {% if user.words_learned|length > 0 %}
            <a href="{% url 'practice:practice_intro' 'vocabulary' %}" class="lesson-card-link">
                <div class="lesson-card">
                    <div class="lesson-icon">ğŸ“š</div>
                    <h4>Vocabulary</h4>
                </div>
            </a>
            {% else %}
            <div class="lesson-card locked">
                <div class="lesson-icon">ğŸ“š</div>
                <h4>Vocabulary</h4>
                <p class="lock-text">Learn some vocabularies first to unlock practice</p>
            </div>
            {% endif %}

            {% if user.sentences_learned|length > 0 %}
            <a href="{% url 'practice:practice_intro' 'sentence' %}" class="lesson-card-link">
                <div class="lesson-card">
                    <div class="lesson-icon">ğŸ“–</div>
                    <h4>Sentences</h4>
                </div>
            </a>
            {% else %}
            <div class="lesson-card locked">
                <div class="lesson-icon">ğŸ“–</div>
                <h4>Sentences</h4>
                <p class="lock-text">Learn some sentences first to unlock practice</p>
            </div>
            {% endif %}

            {% if user.audio_learned|length > 0 %}
            <a href="{% url 'practice:practice_intro' 'listening' %}" class="lesson-card-link">
                <div class="lesson-card">
                    <div class="lesson-icon">ğŸ‘‚ğŸ»</div>
                    <h4>Listening</h4>
                </div>
            </a>
            {% else %}
            <div class="lesson-card locked">
                <div class="lesson-icon">ğŸ‘‚ğŸ»</div>
                <h4>Listening</h4>
                <p class="lock-text">Learn some audio first to unlock practice</p>
            </div>
            {% endif %}
        </div>

        <div class="daily-challenge">
            <div class="challenge-card">
                <div class="challenge-header">
                    <h3>Daily challenges</h3>
                    <div class="{% if completed_daily_challenges_count == daily_challenges|length %}challenge-reward completed{%else%}challenge-reward{% endif %}">
                        {% if completed_daily_challenges_count == daily_challenges|length %}
                            Completed! +75 XP
                        {% else %}
                            +75 XP
                        {% endif %}
                    </div>
                </div>
                <p class="challenge-text">
                    Complete your daily challenges to earn extra XP!
                </p>
                <div class="challenge-progress">
                    <div class="challenge-steps">
                        {% for challenge in daily_challenges %}
                            {% if challenge.completed %}
                            <div class="step completed challenge-step" challenge-description="{{ challenge.description }}">{{ forloop.counter }}</div>
                            {% else %}
                            <div class="step challenge-step" challenge-description="{{ challenge.description }}">{{ forloop.counter }}</div>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <span class="challenge-status">{{ completed_daily_challenges_count }}/{{ daily_challenges|length }} completed</span>
                </div>
            </div>
        </div>
    </div>
</div>
{%endblock content%}