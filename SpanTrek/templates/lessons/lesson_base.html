{% extends 'base/base.html' %} 
{% load static %}
{% block styles %}
<link
    rel="stylesheet"
    type="text/css"
    href="{% static 'styles/lessons/lesson_base.css' %}"
/>
{% endblock %} {% block content %}
<div class="lesson-container">
    <!-- Progress Bar -->
    <div class="lesson-header">
        <!-- Navigation Buttons -->
        <div class="lesson-navigation">
            {% include 'lessons/back_to_country_map.html' with country=country %} 
            {% if prev_lesson_number %}
            <a
                href="{% url 'lessons:landmark_lesson_with_number' country=country landmark=landmark lesson_number=prev_lesson_number %}"
                class="nav-button prev-lesson"
            >
                <span class="arrow">←</span> Previous Lesson
            </a>
            {% endif %} {% if next_lesson_number %}
            <a
                href="{% url 'lessons:landmark_lesson_with_number' country=country landmark=landmark lesson_number=next_lesson_number %}"
                class="nav-button next-lesson"
            >
                Next Lesson <span class="arrow">→</span>
            </a>
            {% endif %}
        </div>

        {% include 'lessons/progress_bar.html' %}

        <h1 class="lesson-title">
            {% block lesson_title %}{{lesson.title}}{% endblock %}
        </h1>
        <div class="lesson-meta">
            <span class="country-name"> {{ country|title }}</span>
            <span class="landmark-name"> - {{ landmark|title }},</span>
            <span class="lesson-number">lesson {{ lesson_number }}</span>
        </div>

        <!-- Main Lesson Content -->
        <div class="lesson-content">
            {{ lesson.lesson_sequence }}
            {% for block in lesson.lesson_sequence %}
            <div class="single-content">
                {% if block == "audio" %}
                    {% include 'lessons/content/audio.html' %}
                {% elif block == "image" %}
                    {% include 'lessons/content/image.html' %}
                {% elif block == "text" %}
                    {% include 'lessons/content/text.html' %}
                {% elif block == "listen" %}
                    {% include 'lessons/exercises/listen.html' %}
                {% elif block == "fill_blank" %}
                    {% include 'lessons/exercises/fill_blank.html' %}
                {% elif block == "match" %}
                    {% include 'lessons/exercises/match.html' %}
                {% elif block == "multiple_choice" %}
                    {% include 'lessons/exercises/multiple_choice.html' %}
                {% elif block == "single_choice" %}
                    {% include 'lessons/exercises/single_choice.html' %}
                {% elif block == "speak" %}
                    {% include 'lessons/exercises/speak.html' %}
                {% elif block == "translate" %}
                    {% include 'lessons/exercises/translate.html' %}
                {% else %}
                    <!-- Unknown block type: {{ block }} -->
                    <div class="error-block">Unknown content type: {{ block }}</div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endblock %} {% block scripts %}{% endblock %}
</div>
